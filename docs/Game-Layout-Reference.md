# 主游戏场景布局参考

> 本文档基于 `proj/index.html` 的 UI 布局，用于指导 Cocos Creator 场景搭建

## 📋 UI 布局总览

```
┌─────────────────────────────────────────────────────────────────┐
│ Game Header (标题栏)                                             │
│ - 标题: Word Tetris                                             │
│ - 副标题: 单词俄罗斯方块 - 在游戏中学习英语                    │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Game Info Bar (游戏信息栏)                                       │
│ 分数: 0 | 等级: 1 | 目标: 100 | 单词总数: 0 | 时间: 00:00 | 连击: 0 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Exam Stats Bar (考试统计栏)                                      │
│ 剩余待测: 0 | 正确命中: 0 (0%) | 覆盖率: 0%                     │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┬─────────────────────────────┬─────────────────┐
│                 │                             │                 │
│  Left Panel     │     Game Canvas             │   Sidebar       │
│  (左侧面板)     │     (游戏画布)              │   (右侧边栏)    │
│                 │                             │                 │
│  ┌───────────┐  │  ┌───────────────────────┐  │  ┌───────────┐  │
│  │           │  │  │  Buffer Zone          │  │  │ 单词准备区 │  │
│  │ 图片展示区 │  │  │  (缓冲区)             │  │  │ 🔴🟡🟢    │  │
│  │           │  │  └───────────────────────┘  │  └───────────┘  │
│  │  [Image]  │  │                             │                 │
│  │           │  │  ┌───────────────────────┐  │  ┌───────────┐  │
│  │  单词名    │  │  │                       │  │  │  错词本   │  │
│  │  音标      │  │  │   Game Zone           │  │  │  (0)      │  │
│  │  中文释义  │  │  │   (游戏区域)          │  │  │           │  │
│  └───────────┘  │  │                       │  │  │  [列表]   │  │
│                 │  │   [下降的单词]        │  │  │           │  │
│  ┌───────────┐  │  │                       │  │  └───────────┘  │
│  │           │  │  │                       │  │                 │
│  │ 输入框     │  │  └───────────────────────┘  │  ┌───────────┐  │
│  │ [____]    │  │                             │  │ 游戏说明   │  │
│  │           │  │  ┌───────────────────────┐  │  │           │  │
│  │ 实时预览   │  │  │  Stack Zone           │  │  │ • 单词下降 │  │
│  │ [SRort]   │  │  │  (堆叠区)             │  │  │ • 输入字母 │  │
│  │           │  │  └───────────────────────┘  │  │ • 堆叠满   │  │
│  │ [放弃按钮] │  │                             │  │   游戏结束 │  │
│  │           │  │  🎯 [Cannon]               │  │           │  │
│  └───────────┘  │     (炮管在底部中央)        │  └───────────┘  │
│                 │                             │                 │
│  ┌───────────┐  │                             │  ┌───────────┐  │
│  │ 控制按钮   │  │                             │  │ 调试面板   │  │
│  │ [开始游戏] │  │                             │  │ [隐藏]    │  │
│  │ [暂停]    │  │                             │  │           │  │
│  │ [重置]    │  │                             │  └───────────┘  │
│  │ [⚙️ 设置] │  │                             │                 │
│  │ [🔊 语音] │  │                             │                 │
│  │ [🧪 单测] │  │                             │                 │
│  └───────────┘  │                             │                 │
│                 │                             │                 │
└─────────────────┴─────────────────────────────┴─────────────────┘
```

## 🎨 各区域详细说明

### 1. Game Header (标题栏)
- **位置**: 顶部居中
- **内容**:
  - 主标题: "Word Tetris"
  - 副标题: "单词俄罗斯方块 - 在游戏中学习英语"
- **样式**:
  - 主标题: 大号字体，加粗
  - 副标题: 中号字体，灰色

### 2. Game Info Bar (游戏信息栏)
- **位置**: 标题下方，横向排列
- **内容**:
  - 分数 (score)
  - 等级 (level)
  - 目标 (target)
  - 单词总数 (vocabulary-count)
  - 时间 (time)
  - 连击 (combo)
- **样式**: 浅色背景，深色文字

### 3. Exam Stats Bar (考试统计栏)
- **位置**: 游戏信息栏下方
- **内容**:
  - 剩余待测 (total-words)
  - 正确命中 (hit-words) + 百分比 (hit-percentage)
  - 覆盖率 (coverage-percentage)
- **样式**: 与游戏信息栏类似

### 4. Left Panel (左侧面板)
- **位置**: 左侧，固定宽度
- **子组件**:

#### 4.1 图片展示区 (Image Showcase)
- 单词图片 (#wordImage)
- 单词名称
- 音标
- 中文释义

#### 4.2 控制区 (Control Panel)
- **输入框** (#letterInput):
  - 提示文本: "直接按键盘输入"
  - 监听键盘事件
- **实时预览** (#realTimePreview):
  - 显示当前输入的单词状态
  - 例如: "SRort" (R 已输入，o 缺失)
- **放弃按钮** (#giveUpBtn):
  - 文字: "放弃 (空格键)"
  - 功能: 放弃当前单词
- **键盘提示**:
  - 💡 直接按键盘字母键输入，Enter提交，Backspace删除，Space放弃

#### 4.3 控制按钮组
- 开始游戏 (#startBtn)
- 暂停 (#pauseBtn)
- 重置 (#resetBtn)
- ⚙️ 词库设置 (#settingsBtn)
- 🔊 语音开/关 (#toggleSpeechBtn)
- 🧪 单测 (#testBtn)

### 5. Game Canvas (游戏画布)
- **位置**: 中央主体区域
- **尺寸**: 600 x 500 像素
- **子区域**:

#### 5.1 Buffer Zone (缓冲区)
- **位置**: 画布顶部
- **高度**: 80px
- **内容**:
  - 信号灯 (红🔴 → 黄🟡 → 绿🟢)
  - 下一个单词预览 (#nextWord)

#### 5.2 Game Zone (游戏区域)
- **位置**: 缓冲区下方
- **高度**: 320px
- **内容**:
  - 下降的单词 (Word entities)
  - 炮管瞄准线
  - 炮弹轨迹
  - 爆炸特效

#### 5.3 Stack Zone (堆叠区)
- **位置**: 游戏区域下方
- **高度**: 100px
- **内容**:
  - 堆叠的单词（失败/放弃的单词）
  - 红色 = 放弃
  - 灰色 = 失败

#### 5.4 Cannon (炮管)
- **位置**: 画布底部中央
- **Y 坐标**: 480px
- **组成**:
  - 基座 (Base)
  - 旋转平台 (Platform)
  - 炮管主体 (Barrel)
  - 炮口 (Muzzle)
  - 引信 (Fuse) - 物理摆动

### 6. Sidebar (右侧边栏)
- **位置**: 右侧，固定宽度
- **子组件**:

#### 6.1 单词准备区 (Buffer Indicator)
- 标题: "单词准备区"
- 信号灯: 🔴🟡🟢
- 下一个单词: "准备中..."

#### 6.2 错词本 (Vocabulary Book)
- 标题: "错词本 (0)"
- 列表 (#vocabularyList)
- 导出按钮 (#exportBtn)

#### 6.3 游戏说明 (Game Instructions)
- 标题: "游戏说明"
- 规则列表:
  - 单词从上方下降
  - 输入缺失的字母击落单词
  - 未击落的单词会堆叠
  - 堆叠满时游戏结束
  - 达到目标分数升级

#### 6.4 调试面板 (Debug Panel)
- 标题: "📋 调试日志"
- 控制按钮: 显示/隐藏、复制、清空、导出
- 日志显示区 (#debugConsole)

### 7. Modals (弹窗)

#### 7.1 游戏结束弹窗 (#gameOverModal)
- 标题: "游戏结束"
- 最终分数 (#finalScore)
- 达到等级 (#finalLevel)
- 收集错词 (#finalVocabulary)
- 按钮: 重新开始 (#restartBtn) | 查看错词本 (#reviewVocabBtn)

#### 7.2 等级提升弹窗 (#levelUpModal)
- 标题: "🎉 等级提升！"
- 新等级 (#newLevel)
- 本级收集错词 (#levelVocabulary)
- 按钮: 继续游戏 (#continueBtn) | 查看错词 (#viewVocabBtn)

## 🎯 Cocos Creator 场景节点层级

根据上述布局，建议的 Cocos Creator 节点层级：

```
Canvas (根节点)
├── Camera
├── BackgroundLayer (背景层, z: -10)
│   └── Background (深蓝色渐变)
│
├── GameLayer (游戏层, z: 0)
│   ├── BufferZone (缓冲区)
│   │   ├── TrafficLights (信号灯容器)
│   │   │   ├── RedLight
│   │   │   ├── YellowLight
│   │   │   └── GreenLight
│   │   └── NextWordLabel
│   │
│   ├── GameZone (游戏区域)
│   │   ├── WordsContainer (单词容器)
│   │   ├── StackZone (堆叠区)
│   │   └── Cannon (炮管)
│   │
│   ├── EffectsLayer (特效层, z: 10)
│   │   ├── BulletsContainer
│   │   ├── ExplosionsContainer
│   │   └── ParticlesContainer
│   │
│   └── HighlightsLayer (高亮层, z: 20)
│       ├── InputHighlight
│       └── RedCrossMarks
│
└── UILayer (UI层, z: 100)
    ├── TopArea (顶部区域)
    │   ├── GameHeader (标题栏)
    │   ├── GameInfoBar (游戏信息栏)
    │   └── ExamStatsBar (考试统计栏)
    │
    ├── LeftPanel (左侧面板)
    │   ├── ImageShowcase (图片展示区)
    │   └── ControlPanel (控制面板)
    │
    ├── Sidebar (右侧边栏)
    │   ├── BufferIndicator
    │   ├── VocabularyBook
    │   ├── Instructions
    │   └── DebugPanel
    │
    └── Modals (弹窗容器, z: 200)
        ├── GameOverModal
        └── LevelUpModal
```

## 📐 尺寸参考

### 主要区域尺寸
- **Game Canvas**: 600 x 500 px
- **Buffer Zone**: 600 x 80 px
- **Game Zone**: 600 x 320 px
- **Stack Zone**: 600 x 100 px
- **Left Panel**: ~250 px 宽
- **Sidebar**: ~250 px 宽

### 组件尺寸
- **单词边框**: 2px，金色 (#FFD700)
- **字母间距**: 8px
- **单词内边距**: 10px
- **炮管基座**: 80 x 40 px
- **炮管长度**: 60 px
- **炮弹半径**: 8 px
- **红叉大小**: 20 x 20 px

## 🎨 颜色参考

- **金色边框**: #FFD700
- **正确输入**: #90EE90 (浅绿色)
- **错误输入**: #FFB6C1 (浅红色)
- **红叉**: 红色 (#FF0000)
- **爆炸粒子**: 6 种颜色（见 GameConfig.ts）

## ⚙️ 下一步

1. 在 Cocos Creator 中创建 `Game.scene`
2. 按照上述节点层级搭建场景
3. 为每个节点添加对应的脚本组件
4. 配置节点属性和组件引用
5. 测试场景渲染效果

---

**参考源文件**: `proj/index.html`, `proj/css/styles.css`

