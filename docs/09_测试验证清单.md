# 测试验证清单

## 📋 本文档内容

- 功能测试用例
- 性能测试指标
- 跨平台测试
- 常见问题排查

---

## 1️⃣ 功能测试清单

### 1.1 游戏核心功能

#### ✅ 单词管理系统

- [ ] **单词加载**
  - [ ] 从 resources 正确加载单词库配置
  - [ ] 按用户选择加载指定词库
  - [ ] 单词数据结构完整（word、phonetic、meaning等）
  - [ ] 打乱单词顺序正常
  - [ ] 单词去重功能正常

- [ ] **单词显示**
  - [ ] 单词节点正确创建
  - [ ] 字母正确显示（小写）
  - [ ] 重音音节红色高亮正确
  - [ ] 缺失字母下划线显示正确
  - [ ] 单词背景和边框正确

- [ ] **单词下降**
  - [ ] 单词从随机x坐标开始下降
  - [ ] 下降速度符合等级设置
  - [ ] 单个单词机制（同时只有一个）
  - [ ] 到达底部后自动堆叠

#### ✅ 缓冲区系统

- [ ] **信号灯倒计时**
  - [ ] 红灯亮起1秒
  - [ ] 黄灯亮起1秒
  - [ ] 绿灯亮起1秒
  - [ ] 倒计时完成后单词开始下降
  - [ ] 倒计时不可跳过

#### ✅ 输入系统

- [ ] **键盘输入**
  - [ ] 字母键（A-Z）输入正常
  - [ ] Enter键提交输入
  - [ ] Backspace删除最后一个字母
  - [ ] Space键放弃当前单词
  - [ ] 输入字母立即显示（小写）

- [ ] **输入验证**
  - [ ] 正确输入：绿色高亮 + 放大
  - [ ] 错误输入：红色显示
  - [ ] 完全正确：触发射击
  - [ ] 错误反馈：显示红叉 + 清空输入

#### ✅ 炮管系统

- [ ] **炮管结构**
  - [ ] 基座正确显示（半圆形石质）
  - [ ] 炮台平台正确显示
  - [ ] 炮管三段式结构完整
  - [ ] 炮口蓝色装饰正确
  - [ ] 引信绳子和火焰粒子正确

- [ ] **炮管动画**
  - [ ] 自动瞄准当前单词（平滑旋转）
  - [ ] 射击后坐力效果明显（20px后退）
  - [ ] 后坐力逐渐恢复（衰减）
  - [ ] 基座不受后坐力影响
  - [ ] 引信物理摆动自然

#### ✅ 射击系统

- [ ] **炮弹效果**
  - [ ] 炮弹从炮口发射
  - [ ] 三层结构正确（外层光晕+中层火球+内核）
  - [ ] 火焰尾迹流畅（20个点）
  - [ ] 炮弹旋转动画
  - [ ] 飞行速度正确（15像素/帧）

- [ ] **碰撞检测**
  - [ ] 炮弹击中单词
  - [ ] 碰撞距离正确（20px）
  - [ ] 单词正确消失

#### ✅ 爆炸系统

- [ ] **粒子爆炸**
  - [ ] 多彩粒子效果（6种颜色）
  - [ ] 粒子径向散射
  - [ ] 重力效果正确
  - [ ] 粒子逐渐衰减
  - [ ] 爆炸持续时间正确（1.5秒）

- [ ] **中文翻译爆炸**
  - [ ] 中文翻译正确显示
  - [ ] 从0.5倍放大到2.5倍
  - [ ] 显示1-2秒
  - [ ] 淡出动画流畅
  - [ ] 金黄色显示 + 描边

#### ✅ 分数系统

- [ ] **分数计算**
  - [ ] 每个字母+1分
  - [ ] 射击奖励+2分
  - [ ] 连击奖励正确（3+连击，每个+1分）
  - [ ] 速度奖励正确
  - [ ] 放弃惩罚-1分

- [ ] **等级提升**
  - [ ] 达到目标分数自动升级
  - [ ] 等级提升弹窗显示
  - [ ] 堆叠区清空
  - [ ] 下降速度增加
  - [ ] 生词本保留

#### ✅ 堆叠区系统

- [ ] **单词堆叠**
  - [ ] 放弃的单词进入堆叠区
  - [ ] 失败的单词进入堆叠区
  - [ ] 从底部向上堆叠
  - [ ] 堆叠位置正确
  - [ ] 堆叠单词标记为灰色

- [ ] **游戏结束判定**
  - [ ] 堆叠区满时触发游戏结束
  - [ ] 游戏结束弹窗显示
  - [ ] 显示最终统计数据

---

### 1.2 TTS 语音系统

#### ✅ 语音播放

- [ ] **多提供商降级**
  - [ ] 百度 TTS 正常
  - [ ] 有道 TTS 正常
  - [ ] Bing TTS 正常
  - [ ] Web Speech API 正常
  - [ ] 提供商失败时自动切换

- [ ] **iOS 优化**
  - [ ] iOS 设备检测正确
  - [ ] 优先使用 Web Speech API
  - [ ] 音频播放不被阻止

- [ ] **播放控制**
  - [ ] 单词下降时自动播放
  - [ ] 每5秒重复播放
  - [ ] 击落时停止播放
  - [ ] 暂停时停止播放
  - [ ] 音量控制有效

#### ✅ 音频缓存

- [ ] **IndexedDB 缓存**
  - [ ] 首次播放自动缓存
  - [ ] 缓存保存成功
  - [ ] 缓存读取成功
  - [ ] 刷新页面后缓存存在
  - [ ] 缓存统计正确

- [ ] **本地文件**
  - [ ] 本地文件优先使用
  - [ ] 本地开发环境检测正确
  - [ ] 下载提示正常

---

### 1.3 UI 系统

#### ✅ 界面显示

- [ ] **顶部信息栏**
  - [ ] 分数实时更新
  - [ ] 等级显示正确
  - [ ] 目标分数显示
  - [ ] 单词总数显示
  - [ ] 时间显示（MM:SS）
  - [ ] 连击数显示

- [ ] **考试统计栏**
  - [ ] 剩余待测显示
  - [ ] 正确命中显示
  - [ ] 命中率计算正确
  - [ ] 覆盖率计算正确

- [ ] **图片展示区**
  - [ ] 图片加载正常
  - [ ] 英文单词显示
  - [ ] 音标显示
  - [ ] 中文翻译显示
  - [ ] 加载指示器正常
  - [ ] 淡入动画流畅

- [ ] **控制面板**
  - [ ] 输入框可用
  - [ ] 实时预览正常
  - [ ] 按钮可点击
  - [ ] 按钮状态正确更新

- [ ] **生词本**
  - [ ] 单词自动添加
  - [ ] 滚动流畅
  - [ ] 导出功能正常
  - [ ] 清空功能正常

#### ✅ 交互响应

- [ ] **按钮点击**
  - [ ] 开始按钮启动游戏
  - [ ] 暂停按钮切换状态
  - [ ] 重置按钮重置游戏
  - [ ] 放弃按钮放弃单词
  - [ ] 设置按钮打开设置
  - [ ] 语音开关切换正常

- [ ] **弹窗系统**
  - [ ] 游戏结束弹窗正确
  - [ ] 等级提升弹窗正确
  - [ ] 弹窗动画流畅
  - [ ] 关闭按钮可用

---

### 1.4 图片系统

#### ✅ 图片加载

- [ ] **多级降级**
  - [ ] 本地图片优先
  - [ ] 网络图片降级
  - [ ] 占位符显示

- [ ] **动画效果**
  - [ ] 淡入动画
  - [ ] 成功闪烁（绿色）
  - [ ] 错误抖动

---

## 2️⃣ 性能测试

### 2.1 帧率测试

| 场景 | 目标 FPS | 实测 FPS | 通过 |
|------|---------|---------|------|
| **游戏主界面** | 60 | ___ | [ ] |
| **单词下降中** | 60 | ___ | [ ] |
| **射击爆炸时** | 55+ | ___ | [ ] |
| **10个粒子同时** | 55+ | ___ | [ ] |
| **堆叠区满时** | 60 | ___ | [ ] |

### 2.2 内存测试

| 场景 | 初始内存 | 运行30分钟后 | 增长 | 通过 |
|------|---------|-------------|------|------|
| **游戏主界面** | ___ MB | ___ MB | ___ MB | [ ] |
| **堆叠区满** | ___ MB | ___ MB | ___ MB | [ ] |
| **生词本100个** | ___ MB | ___ MB | ___ MB | [ ] |

**通过标准**：内存增长 < 50MB

### 2.3 加载时间

| 资源类型 | 目标时间 | 实测时间 | 通过 |
|---------|---------|---------|------|
| **单词库加载** | < 2秒 | ___ | [ ] |
| **图片加载** | < 3秒 | ___ | [ ] |
| **音频加载** | < 2秒 | ___ | [ ] |
| **首次启动** | < 5秒 | ___ | [ ] |

### 2.4 网络请求

- [ ] TTS 请求超时控制（3秒）
- [ ] 图片请求超时控制（5秒）
- [ ] 请求失败自动重试
- [ ] 网络错误友好提示

---

## 3️⃣ 跨平台测试

### 3.1 Web 平台

#### Chrome（推荐）
- [ ] Windows 10/11
- [ ] macOS
- [ ] Linux

#### Firefox
- [ ] Windows
- [ ] macOS

#### Safari
- [ ] macOS
- [ ] iOS

#### Edge
- [ ] Windows

### 3.2 移动端测试

#### iOS
- [ ] iPhone 12+ (iOS 15+)
- [ ] iPad Pro (iOS 15+)
- [ ] Web Speech API 正常
- [ ] 触摸输入正常
- [ ] 屏幕适配正确

#### Android
- [ ] Android 10+
- [ ] 各种屏幕尺寸
- [ ] TTS 服务正常
- [ ] 性能流畅

### 3.3 分辨率测试

| 分辨率 | 宽高比 | 测试结果 |
|--------|-------|---------|
| **1920x1080** | 16:9 | [ ] |
| **1280x720** | 16:9 | [ ] |
| **2560x1440** | 16:9 | [ ] |
| **1366x768** | 16:9 | [ ] |
| **414x896** | 9:19.5 (iPhone) | [ ] |
| **375x667** | 9:16 (iPhone) | [ ] |
| **360x640** | 9:16 (Android) | [ ] |

**验证点**：
- [ ] UI 元素不重叠
- [ ] 文字大小合适
- [ ] 按钮可点击
- [ ] 游戏区域适配

---

## 4️⃣ 兼容性测试

### 4.1 浏览器功能

- [ ] **LocalStorage**
  - [ ] 保存游戏设置
  - [ ] 保存单词进度
  - [ ] 清除缓存功能

- [ ] **IndexedDB**
  - [ ] 音频缓存存储
  - [ ] 缓存读取
  - [ ] 缓存清理

- [ ] **Web Speech API**
  - [ ] 语音合成可用
  - [ ] 英式发音设置
  - [ ] 音量控制

- [ ] **Fetch API**
  - [ ] 远程资源加载
  - [ ] 请求超时
  - [ ] 错误处理

### 4.2 输入法兼容

- [ ] **中文输入法**
  - [ ] 拼音输入正常
  - [ ] 候选框不遮挡游戏
  - [ ] 输入法切换正常

- [ ] **英文输入法**
  - [ ] 直接输入字母
  - [ ] 大小写正确处理

---

## 5️⃣ 边界情况测试

### 5.1 极限情况

- [ ] **单词库**
  - [ ] 空单词库处理
  - [ ] 单词库加载失败
  - [ ] 单词数据不完整

- [ ] **输入**
  - [ ] 快速连续输入
  - [ ] 输入特殊字符
  - [ ] 输入超长文本

- [ ] **网络**
  - [ ] 完全离线情况
  - [ ] 网络中断恢复
  - [ ] 慢速网络（3G）

- [ ] **音频**
  - [ ] 所有 TTS 提供商失败
  - [ ] 音频文件损坏
  - [ ] 同时播放多个音频

### 5.2 异常操作

- [ ] **快速点击**
  - [ ] 连续点击开始按钮
  - [ ] 连续点击暂停按钮
  - [ ] 快速切换设置

- [ ] **页面操作**
  - [ ] 刷新页面时游戏状态
  - [ ] 后退/前进按钮
  - [ ] 多标签页同时运行

- [ ] **资源加载**
  - [ ] 资源加载失败
  - [ ] 资源路径错误
  - [ ] 资源重复加载

---

## 6️⃣ 用户体验测试

### 6.1 新手体验

- [ ] **首次启动**
  - [ ] 加载时间可接受
  - [ ] 界面直观易懂
  - [ ] 游戏说明清晰
  - [ ] 默认设置合理

- [ ] **学习曲线**
  - [ ] 休闲模式难度适中
  - [ ] 错误提示明确
  - [ ] 进度反馈及时

### 6.2 流畅度

- [ ] **响应速度**
  - [ ] 按键响应 < 100ms
  - [ ] 界面切换流畅
  - [ ] 动画不卡顿
  - [ ] 无明显延迟

- [ ] **视觉效果**
  - [ ] 动画自然流畅
  - [ ] 颜色对比合理
  - [ ] 字体大小适中
  - [ ] 粒子效果不过分

---

## 7️⃣ 设计文档符合性检查

### 7.1 必须实现的功能（100%）

- [ ] **炮管系统**
  - [ ] 五层结构完整
  - [ ] 引信物理摆动
  - [ ] 后坐力效果

- [ ] **爆炸效果**
  - [ ] 多彩粒子
  - [ ] 中文翻译爆炸动画
  - [ ] 放大效果（0.5倍→2.5倍）

- [ ] **错误反馈**
  - [ ] 血色红叉（X形状）
  - [ ] 闪烁动画
  - [ ] 自动清空输入

- [ ] **重音高亮**
  - [ ] 重音音节红色显示
  - [ ] 音标解析正确

- [ ] **三级词库**
  - [ ] 按天学习
  - [ ] 专项练习
  - [ ] 按年级分类

### 7.2 禁止简化的功能

- [ ] ❌ 炮管简化为图片
- [ ] ❌ 引信静态动画
- [ ] ❌ 省略中文翻译爆炸
- [ ] ❌ 简化重音高亮
- [ ] ❌ 简化错误标记

---

## 8️⃣ 回归测试

每次修改后必须重新验证：

### 基础功能
- [ ] 游戏可以启动
- [ ] 单词可以下降
- [ ] 输入可以响应
- [ ] 射击可以触发
- [ ] 分数可以增加

### 核心流程
- [ ] 完整玩一局游戏
- [ ] 升级功能正常
- [ ] 游戏结束正常
- [ ] 重置功能正常

---

## 9️⃣ 性能优化建议

### 9.1 代码优化

- [ ] 使用对象池管理频繁创建的节点
- [ ] 避免每帧创建新对象
- [ ] 及时释放不用的资源
- [ ] 减少 Draw Call

### 9.2 资源优化

- [ ] 图片压缩和格式优化
- [ ] 音频文件压缩
- [ ] 合并图集（Atlas）
- [ ] 懒加载非关键资源

### 9.3 渲染优化

- [ ] 减少节点层级
- [ ] 使用批处理
- [ ] 合理设置 z-index
- [ ] 避免频繁修改节点属性

---

## 🔟 Bug 追踪模板

发现 Bug 时填写：

```markdown
## Bug #001

**标题**：___________________

**严重程度**：🔴高 / 🟡中 / 🟢低

**复现步骤**：
1. 
2. 
3. 

**预期行为**：


**实际行为**：


**环境信息**：
- 平台：___
- 浏览器：___
- 版本：___

**截图/录屏**：


**解决方案**：


**状态**：待修复 / 进行中 / 已修复
```

---

## ✅ 最终验收标准

### 必须通过
- [ ] 所有核心功能测试通过
- [ ] 帧率稳定在 55+ FPS
- [ ] 内存增长 < 50MB
- [ ] Chrome/Safari/Edge 测试通过
- [ ] 移动端 iOS/Android 测试通过
- [ ] 所有设计文档要求实现

### 可选优化
- [ ] 性能进一步优化
- [ ] 更多浏览器测试
- [ ] 更多分辨率适配
- [ ] 额外动画效果

---

**测试验证完成！** ✅

下一步：阅读 [10_常见问题FAQ.md](./10_常见问题FAQ.md)（待创建）

或开始实际开发工作！🚀




