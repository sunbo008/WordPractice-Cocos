# Word Tetris - Cocos Creator ç‰ˆæœ¬å¿«é€Ÿå¼€å§‹æŒ‡å—

> æœ¬æ–‡æ¡£å¸®åŠ©ä½ å¿«é€Ÿäº†è§£é¡¹ç›®ç»“æ„å’Œç»§ç»­å¼€å‘

## ğŸ“ å½“å‰é¡¹ç›®ç»“æ„

```
proj-cocos/
â”œâ”€â”€ assets/                          # èµ„æºç›®å½•ï¼ˆä¸»è¦å¼€å‘åŒºåŸŸï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ scenes/                      # åœºæ™¯æ–‡ä»¶ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â”‚   â””â”€â”€ Game-Layout-Reference.md # âœ… UI å¸ƒå±€å‚è€ƒæ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/                     # TypeScript è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¸¸æˆé€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ GameManager.ts      # âœ… æ¸¸æˆä¸»æ§åˆ¶å™¨ï¼ˆæ¡†æ¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ systems/                 # æ¸¸æˆç³»ç»Ÿï¼ˆç©ºï¼‰
â”‚   â”‚   â”œâ”€â”€ entities/                # æ¸¸æˆå®ä½“ï¼ˆç©ºï¼‰
â”‚   â”‚   â”œâ”€â”€ ui/                      # UI ç»„ä»¶ï¼ˆç©ºï¼‰
â”‚   â”‚   â”œâ”€â”€ utils/                   # å·¥å…·ç±»ï¼ˆç©ºï¼‰
â”‚   â”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ GameConfig.ts       # âœ… æ¸¸æˆé…ç½®å¸¸é‡
â”‚   â”‚   â””â”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚       â”œâ”€â”€ Word.ts             # âœ… å•è¯ç›¸å…³ç±»å‹
â”‚   â”‚       â””â”€â”€ GameState.ts        # âœ… æ¸¸æˆçŠ¶æ€ç±»å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ prefabs/                     # é¢„åˆ¶ä½“ç›®å½•ï¼ˆç©ºï¼‰
â”‚   â”œâ”€â”€ resources/                   # åŠ¨æ€åŠ è½½èµ„æºï¼ˆç©ºï¼‰
â”‚   â”œâ”€â”€ textures/                    # çº¹ç†èµ„æºï¼ˆç©ºï¼‰
â”‚   â””â”€â”€ animations/                  # åŠ¨ç”»èµ„æºï¼ˆç©ºï¼‰
â”‚
â”œâ”€â”€ docs/                            # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ 01_è¿ç§»æ€»è§ˆ.md
â”‚   â”œâ”€â”€ 02_ç¯å¢ƒå‡†å¤‡.md
â”‚   â”œâ”€â”€ 03_é¡¹ç›®ç»“æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ 04_èµ„æºè¿ç§»æŒ‡å—.md
â”‚   â”œâ”€â”€ 05_æ ¸å¿ƒé€»è¾‘è¿ç§».md
â”‚   â”œâ”€â”€ 06_æ¸²æŸ“ç³»ç»Ÿæ”¹é€ .md
â”‚   â”œâ”€â”€ 07_UIç³»ç»Ÿé‡å»º.md
â”‚   â”œâ”€â”€ 08_éŸ³é¢‘ç³»ç»Ÿé€‚é….md
â”‚   â”œâ”€â”€ 09_æµ‹è¯•éªŒè¯æ¸…å•.md
â”‚   â”œâ”€â”€ 10_å¸¸è§é—®é¢˜FAQ.md
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ å¿«é€Ÿå‚è€ƒ.md
â”‚
â”œâ”€â”€ MIGRATION_PROGRESS.md            # âœ… è¿ç§»è¿›åº¦æ–‡æ¡£
â”œâ”€â”€ QUICK_START.md                   # æœ¬æ–‡ä»¶
â”œâ”€â”€ README.md
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. é¡¹ç›®åˆå§‹åŒ–
- âœ… åˆ›å»ºå®Œæ•´çš„ç›®å½•ç»“æ„
- âœ… é…ç½® TypeScript
- âœ… é…ç½® Cocos Creator é¡¹ç›®

### 2. æ ¸å¿ƒæ–‡ä»¶

#### GameManager.ts - æ¸¸æˆä¸»æ§åˆ¶å™¨
**ä½ç½®**: `assets/scripts/core/GameManager.ts`

**åŠŸèƒ½**:
- æ¸¸æˆçŠ¶æ€ç®¡ç†ï¼ˆåœæ­¢ã€è¿›è¡Œã€æš‚åœã€ç»“æŸï¼‰
- ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆonLoad, start, updateï¼‰
- æ¸¸æˆæµç¨‹æ§åˆ¶ï¼ˆå¼€å§‹ã€æš‚åœã€é‡ç½®ã€å‡çº§ã€ç»“æŸï¼‰
- åˆ†æ•°å’Œè¿å‡»ç®¡ç†
- é”™è¯ç®¡ç†æ¥å£

**çŠ¶æ€**: æ¡†æ¶å®Œæˆ âœ…

#### GameConfig.ts - æ¸¸æˆé…ç½®
**ä½ç½®**: `assets/scripts/config/GameConfig.ts`

**åŒ…å«é…ç½®**:
- æ¸¸æˆåŒºåŸŸå°ºå¯¸ï¼ˆ600x500ï¼‰
- å•è¯ä¸‹é™é€Ÿåº¦ï¼ˆåŸºç¡€ 0.2 åƒç´ /å¸§ï¼‰
- åˆ†æ•°ç³»ç»Ÿï¼ˆæ¯å­—æ¯ 1 åˆ†ï¼Œå°„å‡»å¥–åŠ± 2 åˆ†ï¼‰
- ç­‰çº§é˜ˆå€¼ï¼ˆ100, 200, 300...ï¼‰
- ç‚®ç®¡ã€ç‚®å¼¹ã€çˆ†ç‚¸ç­‰è§†è§‰æ•ˆæœå‚æ•°
- éŸ³é¢‘ã€è¯åº“ã€R2 å­˜å‚¨é…ç½®

**çŠ¶æ€**: å®Œæˆ âœ…

#### Word.ts - å•è¯ç±»å‹å®šä¹‰
**ä½ç½®**: `assets/scripts/types/Word.ts`

**ç±»å‹å®šä¹‰**:
- `WordData` - å•è¯æ•°æ®æ¥å£
- `FallingWord` - ä¸‹é™ä¸­çš„å•è¯å®ä½“
- `StackedWord` - å †å çš„å•è¯
- `VocabularyConfig` - è¯åº“é…ç½®
- `VocabularyMeta` - è¯åº“å…ƒæ•°æ®

**çŠ¶æ€**: å®Œæˆ âœ…

#### GameState.ts - æ¸¸æˆçŠ¶æ€ç±»å‹
**ä½ç½®**: `assets/scripts/types/GameState.ts`

**ç±»å‹å®šä¹‰**:
- `GameState` - æ¸¸æˆçŠ¶æ€æšä¸¾
- `GameMode` - æ¸¸æˆæ¨¡å¼æšä¸¾
- `BufferState` - ç¼“å†²åŒºçŠ¶æ€æšä¸¾
- `GameStats` - æ¸¸æˆç»Ÿè®¡æ•°æ®
- `ScoreData` - è¯„åˆ†æ•°æ®
- `BufferLights` - ç¼“å†²åŒºç¯å…‰çŠ¶æ€

**çŠ¶æ€**: å®Œæˆ âœ…

### 3. å‚è€ƒæ–‡æ¡£

#### Game-Layout-Reference.md - UI å¸ƒå±€å‚è€ƒ
**ä½ç½®**: `assets/scenes/Game-Layout-Reference.md`

**å†…å®¹**:
- å®Œæ•´çš„ UI å¸ƒå±€ ASCII å›¾
- å„åŒºåŸŸè¯¦ç»†è®¾è®¡è¯´æ˜
- Cocos Creator èŠ‚ç‚¹å±‚çº§å»ºè®®
- å°ºå¯¸å’Œé¢œè‰²å‚è€ƒè¡¨
- å¯¹åº”åŸ `proj/index.html` çš„å¸ƒå±€æ˜ å°„

**çŠ¶æ€**: å®Œæˆ âœ…

#### MIGRATION_PROGRESS.md - è¿ç§»è¿›åº¦
**ä½ç½®**: `proj-cocos/MIGRATION_PROGRESS.md`

**å†…å®¹**:
- å·²å®Œæˆå·¥ä½œæ¸…å•
- å¾…å®Œæˆä»»åŠ¡åˆ—è¡¨
- å®Œæˆåº¦ç»Ÿè®¡ï¼ˆçº¦ 10%ï¼‰
- ä¸‹ä¸€æ­¥è®¡åˆ’
- JavaScript åˆ° TypeScript è½¬æ¢æŒ‡å—
- å‚è€ƒæ–‡æ¡£é“¾æ¥

**çŠ¶æ€**: å®Œæˆ âœ…

## ğŸ“‹ ä¸‹ä¸€æ­¥å¾…åŠäº‹é¡¹

### ä¼˜å…ˆçº§ 1 - æ ¸å¿ƒæ¨¡å—ï¼ˆç«‹å³ï¼‰

1. **WordManager.ts** - å•è¯ç®¡ç†å™¨
   - å•è¯åº“åŠ è½½
   - å•è¯ç”Ÿæˆé€»è¾‘
   - å•è¯ç§»åŠ¨æ›´æ–°
   - å•è¯ç¢°æ’æ£€æµ‹

2. **CannonSystem.ts** - ç‚®ç®¡ç³»ç»Ÿ
   - ç‚®ç®¡æ¸²æŸ“
   - ç„å‡†è®¡ç®—
   - å°„å‡»é€»è¾‘
   - åååŠ›åŠ¨ç”»

3. **WordEntity.ts** - å•è¯å®ä½“
   - å•è¯æ˜¾ç¤º
   - è¾“å…¥å¤„ç†
   - é«˜äº®åé¦ˆ
   - ä¸‹é™é€»è¾‘

4. **Game.scene** - ä¸»æ¸¸æˆåœºæ™¯
   - åˆ›å»ºåœºæ™¯æ–‡ä»¶
   - æŒ‰ç…§ `Game-Layout-Reference.md` æ­å»ºèŠ‚ç‚¹
   - é…ç½®ç»„ä»¶å¼•ç”¨

### ä¼˜å…ˆçº§ 2 - ç³»ç»Ÿæ¨¡å—ï¼ˆçŸ­æœŸï¼‰

1. **ExplosionSystem.ts** - çˆ†ç‚¸ç³»ç»Ÿ
2. **GameRenderer.ts** - æ¸²æŸ“ç³»ç»Ÿ
3. **ScoreManager.ts** - åˆ†æ•°ç®¡ç†å™¨
4. **InputManager.ts** - è¾“å…¥ç®¡ç†å™¨
5. **BufferManager.ts** - ç¼“å†²åŒºç®¡ç†å™¨

### ä¼˜å…ˆçº§ 3 - UI æ¨¡å—ï¼ˆä¸­æœŸï¼‰

1. **GameUI.ts** - æ¸¸æˆä¸»ç•Œé¢
2. **LeftPanelUI.ts** - å·¦ä¾§é¢æ¿
3. **SidebarUI.ts** - å³ä¾§è¾¹æ 
4. **ModalUI.ts** - å¼¹çª—

### ä¼˜å…ˆçº§ 4 - å·¥å…·ç±»å’Œèµ„æºï¼ˆé•¿æœŸï¼‰

1. è¿ç§»å·¥å…·ç±»ï¼ˆTTSService, AudioCache ç­‰ï¼‰
2. è¿ç§»å•è¯åº“èµ„æº
3. è¿ç§»éŸ³é¢‘èµ„æºï¼ˆå¯èƒ½ä½¿ç”¨ R2ï¼‰
4. è¿ç§»å›¾ç‰‡èµ„æºï¼ˆå¯èƒ½ä½¿ç”¨ R2ï¼‰

## ğŸ”§ å¼€å‘å»ºè®®

### 1. æŒ‰ç…§é¡ºåºå¼€å‘

**å»ºè®®å¼€å‘é¡ºåº**:
```
1. åˆ›å»º Game.sceneï¼ˆåœºæ™¯æ¡†æ¶ï¼‰
   â†“
2. å®ç° WordManagerï¼ˆå•è¯ç®¡ç†ï¼‰
   â†“
3. å®ç° WordEntityï¼ˆå•è¯æ˜¾ç¤ºï¼‰
   â†“
4. å®ç° InputManagerï¼ˆè¾“å…¥å¤„ç†ï¼‰
   â†“
5. æµ‹è¯•åŸºç¡€æ¸¸æˆå¾ªç¯ï¼ˆå•è¯ä¸‹é™+è¾“å…¥ï¼‰
   â†“
6. å®ç° CannonSystemï¼ˆç‚®ç®¡ç³»ç»Ÿï¼‰
   â†“
7. å®ç° ExplosionSystemï¼ˆçˆ†ç‚¸ç³»ç»Ÿï¼‰
   â†“
8. æµ‹è¯•å®Œæ•´æ¸¸æˆæµç¨‹
   â†“
9. å®ç° UI æ¨¡å—
   â†“
10. è¿ç§»èµ„æºæ–‡ä»¶
   â†“
11. å®Œæ•´æµ‹è¯•å’Œä¼˜åŒ–
```

### 2. å‚è€ƒåŸä»£ç 

**åŸé¡¹ç›®ä½ç½®**: `../proj/`

**é‡è¦æ–‡ä»¶æ˜ å°„**:
```
åŸæ–‡ä»¶                              â†’  æ–°æ–‡ä»¶
proj/src/core/WordTetrisGame.js    â†’  assets/scripts/core/GameManager.ts
proj/src/systems/CannonSystem.js   â†’  assets/scripts/systems/CannonSystem.ts
proj/src/systems/ExplosionSystem.js â†’  assets/scripts/systems/ExplosionSystem.ts
proj/src/systems/GameRenderer.js   â†’  assets/scripts/systems/GameRenderer.ts
proj/index.html                     â†’  assets/scenes/Game.scene
```

### 3. ä½¿ç”¨ç±»å‹å®šä¹‰

**ç¤ºä¾‹**:
```typescript
import { WordData, FallingWord } from '../types/Word';
import { GameState, GameStats } from '../types/GameState';
import { GameConfig } from '../config/GameConfig';

// ä½¿ç”¨ç±»å‹
const word: WordData = {
    word: 'hello',
    phonetic: '/hÉ™ËˆloÊŠ/',
    meaning: 'ä½ å¥½',
    difficulty: 1,
    // ...
};

// ä½¿ç”¨é…ç½®
const speed = GameConfig.BASE_FALL_SPEED;
```

### 4. éµå¾ª Cocos Creator è§„èŒƒ

**ç»„ä»¶ç¤ºä¾‹**:
```typescript
import { _decorator, Component, Node } from 'cc';
const { ccclass, property } = _decorator;

@ccclass('MyComponent')
export class MyComponent extends Component {
    @property(Node)
    targetNode: Node = null;
    
    protected onLoad(): void {
        // åˆå§‹åŒ–
    }
    
    protected start(): void {
        // å¯åŠ¨
    }
    
    protected update(dt: number): void {
        // æ¯å¸§æ›´æ–°
    }
}
```

## ğŸ“š å‚è€ƒèµ„æº

### é¡¹ç›®æ–‡æ¡£
- **é¡¹ç›®è®¾è®¡**: `../../word_tetris_game_design.md`ï¼ˆå”¯ä¸€æƒå¨ï¼‰
- **è¿ç§»æŒ‡å—**: `README.md`
- **å¿«é€Ÿå‚è€ƒ**: `å¿«é€Ÿå‚è€ƒ.md`
- **é¡¹ç›®ç»“æ„**: `03_é¡¹ç›®ç»“æ„è®¾è®¡.md`

### å¤–éƒ¨èµ„æº
- [Cocos Creator å®˜æ–¹æ–‡æ¡£](https://docs.cocos.com/creator/manual/zh/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)
- [TypeScript ä¸­æ–‡æ–‡æ¡£](https://www.tslang.cn/docs/home.html)

## âš™ï¸ å¼€å‘ç¯å¢ƒ

### å¿…éœ€è½¯ä»¶
- Cocos Creator 3.x
- Node.js 16+
- Visual Studio Codeï¼ˆæ¨èï¼‰

### VSCode æ¨èæ‰©å±•
- Cocos Creator Extension
- TypeScript Extension
- ESLint
- Prettier

## ğŸ¯ å…³é”®æ³¨æ„äº‹é¡¹

### 1. ä¸¥æ ¼éµå¾ªè®¾è®¡æ–‡æ¡£

âš ï¸ **é‡è¦**: æ‰€æœ‰å®ç°å¿…é¡» 100% éµå¾ª `word_tetris_game_design.md`

**ç¤ºä¾‹**:
- âœ… è®¾è®¡è¯´"ç‚®ç®¡" â†’ å¿…é¡»å®ç°å®Œæ•´çš„ç‚®ç®¡è§†è§‰ç³»ç»Ÿ
- âœ… è®¾è®¡è¯´"ä¸­æ–‡ç¿»è¯‘çˆ†ç‚¸åŠ¨ç”»" â†’ å¿…é¡»å®ç°æ”¾å¤§åŠ¨ç”»
- âœ… è®¾è®¡è¯´"è¡€è‰²çº¢å‰" â†’ å¿…é¡»æ˜¯ X å½¢çŠ¶ï¼Œä¸èƒ½åªæ˜¯çº¢è‰²è¾¹æ¡†

### 2. ä¿æŒä»£ç è´¨é‡

- ä½¿ç”¨ TypeScript ç±»å‹æ£€æŸ¥
- æ·»åŠ æ³¨é‡Šè¯´æ˜å¤æ‚é€»è¾‘
- ä¿æŒä»£ç æ•´æ´å’Œå¯è¯»æ€§
- éµå¾ª Cocos Creator æœ€ä½³å®è·µ

### 3. é€æ­¥è¿ç§»ï¼ŒæŒç»­æµ‹è¯•

- æ¯å®Œæˆä¸€ä¸ªæ¨¡å—å°±æµ‹è¯•
- ä¸è¦ä¸€æ¬¡æ€§è¿ç§»æ‰€æœ‰ä»£ç 
- ä¿æŒå°æ­¥å¿«è·‘çš„å¼€å‘èŠ‚å¥

## ğŸš€ å¼€å§‹å¼€å‘

### æ–¹æ³• 1: æ‰“å¼€ Cocos Creator

```bash
# åœ¨ Cocos Creator ä¸­æ‰“å¼€é¡¹ç›®
# æ–‡ä»¶ â†’ æ‰“å¼€é¡¹ç›® â†’ é€‰æ‹© proj-cocos ç›®å½•
```

### æ–¹æ³• 2: ä»å‘½ä»¤è¡Œå¯åŠ¨

```bash
cd proj-cocos
# ä½¿ç”¨ Cocos Creator æ‰“å¼€é¡¹ç›®
```

### ä¸‹ä¸€æ­¥å»ºè®®

1. é˜…è¯» `docs/Game-Layout-Reference.md`
2. åœ¨ Cocos Creator ä¸­åˆ›å»º `Game.scene`
3. æŒ‰ç…§å¸ƒå±€å‚è€ƒæ­å»ºåŸºç¡€èŠ‚ç‚¹ç»“æ„
4. å¼€å§‹å®ç° `WordManager.ts`

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- `docs/MIGRATION_PROGRESS.md` - æŸ¥çœ‹è¿›åº¦å’Œè®¡åˆ’
- `docs/å¿«é€Ÿå‚è€ƒ.md` - å¿«é€ŸæŸ¥æ‰¾ API
- `docs/10_å¸¸è§é—®é¢˜FAQ.md` - è§£å†³å¸¸è§é—®é¢˜

