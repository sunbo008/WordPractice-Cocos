# èµ„æºè¿ç§»æŒ‡å—

## ğŸ“‹ æœ¬æ–‡æ¡£å†…å®¹

- å•è¯åº“è¿ç§»
- éŸ³é¢‘æ–‡ä»¶è¿ç§»
- å›¾ç‰‡èµ„æºè¿ç§»  
- é…ç½®æ–‡ä»¶è¿ç§»
- èµ„æºä¼˜åŒ–å»ºè®®

---

## 1ï¸âƒ£ èµ„æºæ¸…å•

### åŸå§‹é¡¹ç›®èµ„æºç»Ÿè®¡ï¼ˆproj/ï¼‰

| èµ„æºç±»å‹ | æ•°é‡ | æ€»å¤§å°ï¼ˆä¼°ç®—ï¼‰ | ä½ç½® |
|---------|------|---------------|------|
| å•è¯åº“ JSON | 93 ä¸ª | ~5 MB | `proj/words/` |
| TTS éŸ³é¢‘ MP3 | 662 ä¸ª | ~80 MB | `proj/audio/` |
| å•è¯å›¾ç‰‡ JPG | 699 ä¸ª | ~150 MB | `proj/images/` |
| é…ç½®æ–‡ä»¶ | 1 ä¸ª | ~50 KB | `proj/words/config-v2.json` |

**æ€»è®¡ï¼šçº¦ 235 MB**

---

## 2ï¸âƒ£ å•è¯åº“è¿ç§»

### 2.1 æºæ–‡ä»¶ä½ç½®

```
proj/words/
â”œâ”€â”€ config-v2.json                   # è¯åº“é…ç½®
â”œâ”€â”€ daily-phonics/                   # æŒ‰å¤©å­¦ä¹ ï¼ˆ15ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ day01.json
â”‚   â”œâ”€â”€ day02.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ special-practice/                # ä¸“é¡¹ç»ƒä¹ ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ ae-practice.json
â”‚   â”œâ”€â”€ e-practice.json
â”‚   â”œâ”€â”€ long-o-practice.json
â”‚   â””â”€â”€ short-o-practice.json
â””â”€â”€ grade-based/                     # æŒ‰å¹´çº§åˆ†ç±»ï¼ˆ74ä¸ªæ–‡ä»¶ï¼‰
    â”œâ”€â”€ primary/                     # å°å­¦ï¼ˆ8ä¸ªå­¦æœŸï¼‰
    â”œâ”€â”€ middle/                      # åˆä¸­ï¼ˆ6ä¸ªå­¦æœŸï¼‰
    â””â”€â”€ high/                        # é«˜ä¸­ï¼ˆ6ä¸ªå­¦æœŸï¼‰
```

### 2.2 ç›®æ ‡ä½ç½®

```
proj-cocos/assets/resources/words/
â”œâ”€â”€ config-v2.json
â”œâ”€â”€ daily-phonics/
â”‚   â”œâ”€â”€ day01.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ special-practice/
â”‚   â””â”€â”€ ...
â””â”€â”€ grade-based/
    â”œâ”€â”€ primary/
    â”œâ”€â”€ middle/
    â””â”€â”€ high/
```

### 2.3 è¿ç§»æ­¥éª¤

#### æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨å¤åˆ¶ï¼ˆç®€å•ç›´æ¥ï¼‰

```bash
# Windows å‘½ä»¤è¡Œ
cd D:\workspace\WordPractice

# å¤åˆ¶æ•´ä¸ª words ç›®å½•
xcopy proj\words proj-cocos\assets\resources\words\ /E /I /Y

# æˆ–ä½¿ç”¨æ–‡ä»¶ç®¡ç†å™¨ç›´æ¥æ‹–æ‹½å¤åˆ¶
```

#### æ–¹æ³•äºŒï¼šä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰

åˆ›å»º `tools/migrate-resources.js`ï¼š

```javascript
const fs = require('fs-extra');
const path = require('path');

// æºç›®å½•å’Œç›®æ ‡ç›®å½•
const SRC_WORDS = path.join(__dirname, '../../proj/words');
const DEST_WORDS = path.join(__dirname, '../assets/resources/words');

async function migrateWords() {
    console.log('å¼€å§‹è¿ç§»å•è¯åº“...');
    
    try {
        // ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨
        await fs.ensureDir(DEST_WORDS);
        
        // å¤åˆ¶æ‰€æœ‰æ–‡ä»¶
        await fs.copy(SRC_WORDS, DEST_WORDS, {
            overwrite: true,
            filter: (src) => {
                // åªå¤åˆ¶ JSON æ–‡ä»¶
                return src.endsWith('.json') || fs.statSync(src).isDirectory();
            }
        });
        
        console.log('âœ… å•è¯åº“è¿ç§»å®Œæˆï¼');
        console.log(`   æºç›®å½•: ${SRC_WORDS}`);
        console.log(`   ç›®æ ‡ç›®å½•: ${DEST_WORDS}`);
        
        // ç»Ÿè®¡æ–‡ä»¶æ•°é‡
        const files = await fs.readdir(DEST_WORDS);
        console.log(`   æ–‡ä»¶æ•°é‡: ${files.length}`);
        
    } catch (error) {
        console.error('âŒ è¿ç§»å¤±è´¥:', error);
    }
}

// æ‰§è¡Œè¿ç§»
migrateWords();
```

è¿è¡Œè„šæœ¬ï¼š

```bash
cd proj-cocos/tools
node migrate-resources.js
```

### 2.4 éªŒè¯å•è¯åº“

åœ¨ Cocos Creator ä¸­éªŒè¯ï¼š

```typescript
// åˆ›å»ºæµ‹è¯•è„šæœ¬ TestWords.ts
import { _decorator, Component, JsonAsset } from 'cc';
import { resources } from 'cc';
const { ccclass } = _decorator;

@ccclass('TestWords')
export class TestWords extends Component {
    start() {
        // æµ‹è¯•åŠ è½½é…ç½®æ–‡ä»¶
        resources.load('words/config-v2', JsonAsset, (err, asset) => {
            if (err) {
                console.error('âŒ é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥:', err);
                return;
            }
            console.log('âœ… é…ç½®æ–‡ä»¶åŠ è½½æˆåŠŸ:', asset.json);
        });
        
        // æµ‹è¯•åŠ è½½å•è¯åº“
        resources.load('words/daily-phonics/day01', JsonAsset, (err, asset) => {
            if (err) {
                console.error('âŒ å•è¯åº“åŠ è½½å¤±è´¥:', err);
                return;
            }
            console.log('âœ… å•è¯åº“åŠ è½½æˆåŠŸ:', asset.json);
            console.log(`   å•è¯æ•°é‡: ${asset.json.words.length}`);
        });
    }
}
```

---

## 3ï¸âƒ£ éŸ³é¢‘æ–‡ä»¶è¿ç§»

### 3.1 æºæ–‡ä»¶ä½ç½®

```
proj/audio/
â”œâ”€â”€ hello_baidu.mp3
â”œâ”€â”€ world_youdao.mp3
â””â”€â”€ ... (662ä¸ªæ–‡ä»¶)
```

### 3.2 ç›®æ ‡ä½ç½®

```
proj-cocos/assets/resources/audio/tts/
â”œâ”€â”€ hello_baidu.mp3
â”œâ”€â”€ world_youdao.mp3
â””â”€â”€ ...
```

### 3.3 è¿ç§»æ­¥éª¤

```bash
# Windows å‘½ä»¤è¡Œ
xcopy proj\audio proj-cocos\assets\resources\audio\tts\ /E /I /Y
```

### 3.4 éŸ³é¢‘ä¼˜åŒ–å»ºè®®

**é—®é¢˜ï¼šéŸ³é¢‘æ–‡ä»¶è¿‡å¤šè¿‡å¤§ï¼ˆ662ä¸ªï¼Œçº¦80MBï¼‰**

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆä¸€ï¼šä¿ç•™æœ¬åœ°ç¼“å­˜ï¼ŒåŠ¨æ€ä¸‹è½½ï¼ˆæ¨èï¼‰

```typescript
/**
 * éŸ³é¢‘ç¼“å­˜ç®¡ç†å™¨ï¼ˆé€‚é… Cocos Creatorï¼‰
 */
export class AudioCacheManager {
    // æ£€æŸ¥æœ¬åœ°ç¼“å­˜
    static async hasLocalCache(word: string, provider: string): Promise<boolean> {
        const path = `audio/tts/${word}_${provider}`;
        return new Promise((resolve) => {
            resources.load(path, AudioClip, (err) => {
                resolve(!err);
            });
        });
    }
    
    // ä»ç½‘ç»œä¸‹è½½å¹¶ç¼“å­˜
    static async downloadAndCache(word: string, provider: string, url: string): Promise<AudioClip> {
        // ä½¿ç”¨ TTS æœåŠ¡ä¸‹è½½éŸ³é¢‘
        // ä¿å­˜åˆ° IndexedDB æˆ– localStorage
        // è¿”å› AudioClip
    }
}
```

#### æ–¹æ¡ˆäºŒï¼šåªè¿ç§»å¸¸ç”¨å•è¯éŸ³é¢‘

```javascript
// å·¥å…·è„šæœ¬ï¼šåªå¤åˆ¶å‰100ä¸ªé«˜é¢‘å•è¯çš„éŸ³é¢‘
const COMMON_WORDS = ['hello', 'world', 'good', ...]; // å‰100ä¸ª

for (const word of COMMON_WORDS) {
    // å¤åˆ¶è¯¥å•è¯çš„æ‰€æœ‰ TTS æä¾›å•†éŸ³é¢‘
    const files = fs.readdirSync('proj/audio');
    const wordFiles = files.filter(f => f.startsWith(`${word}_`));
    
    for (const file of wordFiles) {
        fs.copyFileSync(
            `proj/audio/${file}`,
            `proj-cocos/assets/resources/audio/tts/${file}`
        );
    }
}
```

#### æ–¹æ¡ˆä¸‰ï¼šè¿œç¨‹åŠ è½½ï¼ˆWeb å¹³å°ï¼‰

```typescript
/**
 * ä½¿ç”¨ Cloudflare R2 æˆ–å…¶ä»– CDN å­˜å‚¨éŸ³é¢‘
 */
export class RemoteAudioLoader {
    private static R2_BASE_URL = 'https://your-r2-url.com/audio/';
    
    static async loadAudio(word: string, provider: string): Promise<AudioClip> {
        const url = `${this.R2_BASE_URL}${word}_${provider}.mp3`;
        
        return new Promise((resolve, reject) => {
            assetManager.loadRemote(url, { ext: '.mp3' }, (err, clip: AudioClip) => {
                if (err) {
                    reject(err);
                } else {
                    resolve(clip);
                }
            });
        });
    }
}
```

### 3.5 éŸ³é¢‘åŠ è½½ç­–ç•¥

**æ¨èç­–ç•¥ï¼šä¸‰çº§é™çº§**

```typescript
async loadWordAudio(word: string, provider: string): Promise<AudioClip> {
    // 1. ä¼˜å…ˆçº§1ï¼šæœ¬åœ°èµ„æº
    const localPath = `audio/tts/${word}_${provider}`;
    let clip = await this.loadLocal(localPath);
    if (clip) return clip;
    
    // 2. ä¼˜å…ˆçº§2ï¼šIndexedDB ç¼“å­˜
    clip = await AudioCacheManager.getCache(word, provider);
    if (clip) return clip;
    
    // 3. ä¼˜å…ˆçº§3ï¼šç½‘ç»œä¸‹è½½
    const url = this.getTTSUrl(word, provider);
    clip = await RemoteAudioLoader.loadAudio(word, provider);
    
    // ä¿å­˜åˆ°ç¼“å­˜
    await AudioCacheManager.saveCache(word, provider, clip);
    
    return clip;
}
```

---

## 4ï¸âƒ£ å›¾ç‰‡èµ„æºè¿ç§»

### 4.1 æºæ–‡ä»¶ä½ç½®

```
proj/images/
â”œâ”€â”€ hello.jpg
â”œâ”€â”€ world.jpg
â””â”€â”€ ... (699ä¸ªæ–‡ä»¶ï¼Œçº¦150MB)
```

### 4.2 ç›®æ ‡ä½ç½®

```
proj-cocos/assets/resources/images/words/
â”œâ”€â”€ hello.jpg
â”œâ”€â”€ world.jpg
â””â”€â”€ ...
```

### 4.3 å›¾ç‰‡ä¼˜åŒ–æ–¹æ¡ˆ

**é—®é¢˜ï¼šå›¾ç‰‡è¿‡å¤šè¿‡å¤§ï¼ˆ699ä¸ªï¼Œçº¦150MBï¼‰**

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆä¸€ï¼šå‹ç¼©å›¾ç‰‡

```javascript
// ä½¿ç”¨ imagemin å‹ç¼©å·¥å…·
const imagemin = require('imagemin');
const imageminJpegRecompress = require('imagemin-jpeg-recompress');

async function compressImages() {
    await imagemin(['proj/images/*.jpg'], {
        destination: 'proj-cocos/assets/resources/images/words',
        plugins: [
            imageminJpegRecompress({
                quality: 'medium',  // è´¨é‡è®¾ç½®
                max: 200,           // æœ€å¤§å°ºå¯¸ 200x200
                min: 200
            })
        ]
    });
}
```

#### æ–¹æ¡ˆäºŒï¼šè½¬æ¢ä¸º WebPï¼ˆæ›´å°ï¼‰

```javascript
const sharp = require('sharp');
const fs = require('fs-extra');
const path = require('path');

async function convertToWebP() {
    const files = await fs.readdir('proj/images');
    
    for (const file of files) {
        if (file.endsWith('.jpg') || file.endsWith('.jpeg')) {
            const inputPath = path.join('proj/images', file);
            const outputPath = path.join(
                'proj-cocos/assets/resources/images/words',
                file.replace(/\.jpe?g$/, '.webp')
            );
            
            await sharp(inputPath)
                .resize(200, 200, { fit: 'cover' })
                .webp({ quality: 80 })
                .toFile(outputPath);
            
            console.log(`âœ… è½¬æ¢å®Œæˆ: ${file} â†’ ${path.basename(outputPath)}`);
        }
    }
}
```

#### æ–¹æ¡ˆä¸‰ï¼šè¿œç¨‹åŠ è½½ï¼ˆæ¨èï¼‰

```typescript
/**
 * å›¾ç‰‡è¿œç¨‹åŠ è½½å™¨
 */
export class ImageLoader {
    private static UNSPLASH_API = 'https://source.unsplash.com/200x200/?';
    private static R2_BASE_URL = 'https://your-r2-url.com/images/';
    
    /**
     * ä¸‰çº§é™çº§åŠ è½½ç­–ç•¥
     */
    static async loadWordImage(word: string): Promise<SpriteFrame> {
        // 1. æœ¬åœ°èµ„æº
        let frame = await this.loadLocal(word);
        if (frame) return frame;
        
        // 2. R2 è¿œç¨‹å­˜å‚¨
        frame = await this.loadFromR2(word);
        if (frame) return frame;
        
        // 3. Unsplash API
        frame = await this.loadFromUnsplash(word);
        return frame;
    }
    
    private static async loadLocal(word: string): Promise<SpriteFrame> {
        return new Promise((resolve, reject) => {
            resources.load(`images/words/${word}`, SpriteFrame, (err, frame) => {
                if (err) reject(err);
                else resolve(frame);
            });
        });
    }
    
    private static async loadFromR2(word: string): Promise<SpriteFrame> {
        const url = `${this.R2_BASE_URL}${word}.jpg`;
        return this.loadRemote(url);
    }
    
    private static async loadFromUnsplash(word: string): Promise<SpriteFrame> {
        const url = `${this.UNSPLASH_API}${word}`;
        return this.loadRemote(url);
    }
    
    private static async loadRemote(url: string): Promise<SpriteFrame> {
        return new Promise((resolve, reject) => {
            assetManager.loadRemote(url, (err, texture: Texture2D) => {
                if (err) {
                    reject(err);
                } else {
                    const frame = new SpriteFrame();
                    frame.texture = texture;
                    resolve(frame);
                }
            });
        });
    }
}
```

### 4.4 å»ºè®®ç­–ç•¥

**å¯¹äºå›¾ç‰‡èµ„æºï¼Œæ¨èé‡‡ç”¨æ··åˆç­–ç•¥ï¼š**

1. **å¸¸ç”¨å•è¯å›¾ç‰‡**ï¼ˆå‰50-100ä¸ªï¼‰ï¼šæ‰“åŒ…åˆ°æœ¬åœ°
2. **å…¶ä»–å•è¯å›¾ç‰‡**ï¼šè¿œç¨‹åŠ è½½ + ç¼“å­˜
3. **å ä½ç¬¦**ï¼šæœ¬åœ°å†…ç½®ç®€å•å ä½å›¾

---

## 5ï¸âƒ£ é…ç½®æ–‡ä»¶è¿ç§»

### 5.1 è¯åº“é…ç½®

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
copy proj\words\config-v2.json proj-cocos\assets\resources\words\config-v2.json
```

### 5.2 æ¸¸æˆé…ç½®

**åŸå§‹é…ç½®**ï¼ˆåˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼‰éœ€è¦æ•´åˆï¼š

åˆ›å»º `assets/resources/config/game-config.json`ï¼š

```json
{
    "version": "1.0.0",
    "game": {
        "canvasWidth": 600,
        "canvasHeight": 500,
        "baseFallSpeed": 0.2,
        "speedIncrement": 0.05
    },
    "score": {
        "scorePerLetter": 1,
        "shootBonus": 2,
        "speedBonusMultiplier": 1.5,
        "comboBonus": 1,
        "perfectBonus": 20
    },
    "levels": {
        "thresholds": [0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000]
    },
    "buffer": {
        "countdownTime": 3000,
        "lightDuration": 1000
    },
    "audio": {
        "ttsProviders": ["baidu", "youdao", "bing", "webspeech"],
        "cacheEnabled": true,
        "repeatInterval": 5000
    }
}
```

### 5.3 R2 é…ç½®

åˆ›å»º `assets/scripts/config/R2Config.ts`ï¼š

```typescript
export class R2Config {
    // Cloudflare R2 é…ç½®
    static readonly ENABLED = true;
    static readonly BASE_URL = 'https://your-domain.com/';
    
    // èµ„æºè·¯å¾„
    static readonly AUDIO_PATH = 'audio/';
    static readonly IMAGE_PATH = 'images/';
    
    // ç¼“å­˜ç­–ç•¥
    static readonly CACHE_ENABLED = true;
    static readonly CACHE_DURATION = 7 * 24 * 60 * 60 * 1000; // 7å¤©
}
```

---

## 6ï¸âƒ£ èµ„æºåŠ è½½å°è£…

### 6.1 ç»Ÿä¸€èµ„æºç®¡ç†å™¨

åˆ›å»º `assets/scripts/utils/ResourceManager.ts`ï¼š

```typescript
import { _decorator, resources, JsonAsset, AudioClip, SpriteFrame } from 'cc';

/**
 * ç»Ÿä¸€èµ„æºç®¡ç†å™¨
 * å°è£…æ‰€æœ‰èµ„æºåŠ è½½é€»è¾‘
 */
export class ResourceManager {
    // å•ä¾‹æ¨¡å¼
    private static _instance: ResourceManager = null;
    
    public static getInstance(): ResourceManager {
        if (!this._instance) {
            this._instance = new ResourceManager();
        }
        return this._instance;
    }
    
    /**
     * åŠ è½½å•è¯åº“é…ç½®
     */
    public async loadVocabularyConfig(): Promise<any> {
        return this.loadJSON('words/config-v2');
    }
    
    /**
     * åŠ è½½å•è¯åº“
     */
    public async loadVocabulary(libraryId: string): Promise<any> {
        return this.loadJSON(`words/${libraryId}`);
    }
    
    /**
     * åŠ è½½å•è¯éŸ³é¢‘
     */
    public async loadWordAudio(word: string, provider: string): Promise<AudioClip> {
        const path = `audio/tts/${word}_${provider}`;
        
        return new Promise((resolve, reject) => {
            resources.load(path, AudioClip, (err, clip) => {
                if (err) {
                    // é™çº§åˆ°ç½‘ç»œåŠ è½½
                    this.loadRemoteAudio(word, provider)
                        .then(resolve)
                        .catch(reject);
                } else {
                    resolve(clip);
                }
            });
        });
    }
    
    /**
     * åŠ è½½å•è¯å›¾ç‰‡
     */
    public async loadWordImage(word: string): Promise<SpriteFrame> {
        const path = `images/words/${word}`;
        
        return new Promise((resolve, reject) => {
            resources.load(path, SpriteFrame, (err, frame) => {
                if (err) {
                    // é™çº§åˆ°ç½‘ç»œåŠ è½½
                    this.loadRemoteImage(word)
                        .then(resolve)
                        .catch(reject);
                } else {
                    resolve(frame);
                }
            });
        });
    }
    
    /**
     * åŠ è½½ JSON èµ„æº
     */
    private loadJSON(path: string): Promise<any> {
        return new Promise((resolve, reject) => {
            resources.load(path, JsonAsset, (err, asset) => {
                if (err) {
                    reject(err);
                } else {
                    resolve(asset.json);
                }
            });
        });
    }
    
    /**
     * è¿œç¨‹åŠ è½½éŸ³é¢‘ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
     */
    private async loadRemoteAudio(word: string, provider: string): Promise<AudioClip> {
        // å®ç°ç½‘ç»œåŠ è½½é€»è¾‘
        // ...
        return null;
    }
    
    /**
     * è¿œç¨‹åŠ è½½å›¾ç‰‡ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
     */
    private async loadRemoteImage(word: string): Promise<SpriteFrame> {
        // å®ç°ç½‘ç»œåŠ è½½é€»è¾‘
        // ...
        return null;
    }
    
    /**
     * é‡Šæ”¾èµ„æº
     */
    public releaseAsset(path: string): void {
        resources.release(path);
    }
    
    /**
     * é‡Šæ”¾æ‰€æœ‰èµ„æº
     */
    public releaseAll(): void {
        resources.releaseAll();
    }
}
```

---

## 7ï¸âƒ£ è¿ç§»éªŒè¯æ¸…å•

### å•è¯åº“éªŒè¯

- [ ] `config-v2.json` å¯ä»¥åŠ è½½
- [ ] `daily-phonics/` ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¯ä»¥åŠ è½½
- [ ] `special-practice/` ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¯ä»¥åŠ è½½
- [ ] `grade-based/` ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¯ä»¥åŠ è½½
- [ ] å•è¯æ•°æ®ç»“æ„æ­£ç¡®ï¼ˆwordã€phoneticã€meaning ç­‰å­—æ®µï¼‰

### éŸ³é¢‘éªŒè¯

- [ ] è‡³å°‘10ä¸ªå¸¸ç”¨å•è¯çš„éŸ³é¢‘å¯ä»¥æ’­æ”¾
- [ ] éŸ³é¢‘ç¼“å­˜ç³»ç»Ÿå·¥ä½œæ­£å¸¸
- [ ] è¿œç¨‹åŠ è½½é™çº§æ–¹æ¡ˆå·¥ä½œæ­£å¸¸
- [ ] TTS æœåŠ¡é›†æˆæ­£å¸¸

### å›¾ç‰‡éªŒè¯

- [ ] è‡³å°‘10ä¸ªå¸¸ç”¨å•è¯çš„å›¾ç‰‡å¯ä»¥æ˜¾ç¤º
- [ ] å›¾ç‰‡åŠ è½½é€Ÿåº¦å¯æ¥å—ï¼ˆ< 2ç§’ï¼‰
- [ ] å ä½ç¬¦æ˜¾ç¤ºæ­£å¸¸
- [ ] è¿œç¨‹åŠ è½½é™çº§æ–¹æ¡ˆå·¥ä½œæ­£å¸¸

### é…ç½®éªŒè¯

- [ ] æ¸¸æˆé…ç½®å¯ä»¥åŠ è½½
- [ ] R2 é…ç½®æ­£ç¡®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- [ ] æ‰€æœ‰é…ç½®å‚æ•°æœ‰æ•ˆ

---

## 8ï¸âƒ£ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### èµ„æºé¢„åŠ è½½

```typescript
/**
 * é¢„åŠ è½½ç®¡ç†å™¨
 */
export class PreloadManager {
    /**
     * é¢„åŠ è½½å…³é”®èµ„æº
     */
    public async preloadEssentials(): Promise<void> {
        const tasks = [
            // é¢„åŠ è½½é…ç½®
            this.preloadConfigs(),
            // é¢„åŠ è½½å‰50ä¸ªå•è¯åº“
            this.preloadCommonWords(),
            // é¢„åŠ è½½å¸¸ç”¨éŸ³é¢‘
            this.preloadCommonAudio(),
            // é¢„åŠ è½½å¸¸ç”¨å›¾ç‰‡
            this.preloadCommonImages()
        ];
        
        await Promise.all(tasks);
    }
    
    private async preloadCommonWords(): Promise<void> {
        const commonLibraries = ['day01', 'day02', 'day03'];
        
        for (const lib of commonLibraries) {
            await ResourceManager.getInstance().loadVocabulary(lib);
        }
    }
}
```

### èµ„æºå‹ç¼©

- éŸ³é¢‘ï¼šä½¿ç”¨ MP3 128kbps æˆ–æ›´ä½ç ç‡
- å›¾ç‰‡ï¼šä½¿ç”¨ WebP æ ¼å¼ï¼Œè´¨é‡ 80%
- JSONï¼šå‹ç¼©å»é™¤ç©ºæ ¼å’Œæ¢è¡Œ

### å»¶è¿ŸåŠ è½½

```typescript
/**
 * å»¶è¿ŸåŠ è½½ç­–ç•¥
 */
export class LazyLoadManager {
    /**
     * å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº
     */
    public async lazyLoadAssets(): Promise<void> {
        // æ¸¸æˆå¼€å§‹åå†åŠ è½½
        setTimeout(() => {
            this.loadExtraVocabularies();
            this.loadExtraImages();
        }, 5000);
    }
}
```

---

## 9ï¸âƒ£ å¸¸è§é—®é¢˜

### Q1: èµ„æºæ–‡ä»¶å¤ªå¤§ï¼ŒåŠ è½½æ…¢ï¼Ÿ
**A:** 
1. ä½¿ç”¨èµ„æºå‹ç¼©
2. é‡‡ç”¨è¿œç¨‹åŠ è½½ + æœ¬åœ°ç¼“å­˜ç­–ç•¥
3. åªæ‰“åŒ…å¸¸ç”¨èµ„æº

### Q2: Cocos Creator èµ„æºå¯¼å…¥å¤±è´¥ï¼Ÿ
**A:**
1. æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
2. æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
3. å°è¯•åˆ·æ–°èµ„æºç®¡ç†å™¨ï¼ˆå³é”® â†’ åˆ·æ–°ï¼‰

### Q3: éŸ³é¢‘åœ¨æ‰‹æœºä¸Šæ— æ³•æ’­æ”¾ï¼Ÿ
**A:**
1. æ£€æŸ¥éŸ³é¢‘æ ¼å¼ï¼ˆæ¨è MP3ï¼‰
2. ç¡®ä¿åœ¨ç”¨æˆ·äº¤äº’åæ’­æ”¾ï¼ˆæµè§ˆå™¨é™åˆ¶ï¼‰
3. æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

### Q4: å›¾ç‰‡æ˜¾ç¤ºæ¨¡ç³Šï¼Ÿ
**A:**
1. æ£€æŸ¥åŸå›¾åˆ†è¾¨ç‡
2. è°ƒæ•´ Sprite ç»„ä»¶çš„ Trim è®¾ç½®
3. è®¾ç½®æ­£ç¡®çš„å›¾ç‰‡ç±»å‹ï¼ˆSpriteã€Texture ç­‰ï¼‰

---

## ğŸ”Ÿ æ€»ç»“

### æ¨èçš„èµ„æºç­–ç•¥

1. **å•è¯åº“**ï¼šå…¨éƒ¨æ‰“åŒ…åˆ°æœ¬åœ°ï¼ˆä½“ç§¯å°ï¼Œ5MBï¼‰
2. **éŸ³é¢‘**ï¼šå¸¸ç”¨å•è¯æ‰“åŒ…ï¼Œå…¶ä»–è¿œç¨‹åŠ è½½
3. **å›¾ç‰‡**ï¼šå¸¸ç”¨å•è¯æ‰“åŒ…ï¼Œå…¶ä»–è¿œç¨‹åŠ è½½
4. **é…ç½®**ï¼šå…¨éƒ¨æ‰“åŒ…åˆ°æœ¬åœ°

### é¢„æœŸæ•ˆæœ

- **åˆå§‹åŒ…ä½“ç§¯**ï¼š< 50MBï¼ˆä¸å«å…¨éƒ¨éŸ³é¢‘å›¾ç‰‡ï¼‰
- **é¦–æ¬¡åŠ è½½æ—¶é—´**ï¼š< 10ç§’
- **æ¸¸æˆæµç•…åº¦**ï¼š60 FPS
- **èµ„æºåŠ è½½æˆåŠŸç‡**ï¼š> 95%

---

**èµ„æºè¿ç§»å®Œæˆï¼** âœ…

ä¸‹ä¸€æ­¥ï¼šé˜…è¯» [05_æ ¸å¿ƒé€»è¾‘è¿ç§».md](./05_æ ¸å¿ƒé€»è¾‘è¿ç§».md)




